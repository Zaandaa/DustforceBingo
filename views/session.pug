extends layout

block js
	script= "const sessionId = \'" + session.id + "';"
	script= "const bingoSize = \'" + size + "';"
	script= "const lockout = '" + lockout + "' == 'on';"
	script= "var player = undefined"
	script(src="/bingo/socket/socket.io.min.js")
	script(src="/bingo/js/board.js")
	script(src="/bingo/js/session.js")

block content
	
	div.floater
		div.alert.alert-danger(role="alert", style="display:none;")
			div.alert-text
			button.close(type="button", aria-label="Close")
				span(aria-hidden="true") &times;

	div.floater
		div.alert.alert-info(role="alert", style="display:none;") 
			div.alert-text Connecting to dustkid.com...
			
	div.floater
		div.alert.alert-success(role="alert", style="display:none;") 
			div.alert-text Connected!
			button.close(type="button", aria-label="Close")
				span(aria-hidden="true") &times;
				
	div.floater
		div.alert.alert-warning.multiple(style="display:none;")
			div.alert-text <strong>Multiple users found!</strong> Select which one is you!
			button.close(type="button" aria-label="Close" onclick="resetJoin()")
				span(aria-hidden="true") Ã—
			div.chooser
			
			
	div#main_div.row

		div.col-xl-4
			div#user_div.row
				div.col
					form#username_form.form_inline
						input#username.form-inline(placeholder="Dustkid name/id#")
					button#join.btn.btn-sm Join
					button#ready.btn.btn-sm Ready
					button#reset(style="display: none")
					div#color_div
						div#color_label Color
						div#color_align
							button#color.btn(value="white", style="background-color:var(--white)")
							div#color_container.collapse
								each val in ["Red", "Orange", "Yellow", "Green", "Blue", "Purple", "Pink", "White"]
									div.btn.colorpicker(value= val.toLowerCase(), style= "background-color:var(--" + val.toLowerCase() + ");")

			div.row
				div#players_table_div.col

			div
				p #[a(href='') Copy this link] to invite more players

			div
				h4.impact Rules
				ul
					li #{save}, Length: #{length}, Difficulty: #{difficulty}
					li #{size} by #{size}, first to #{wincondition}
					li Lockout: #{lockout}
					li Goal options: #{options}
					li Players start at the Nexus door
					li Level tomes and level editor are banned

		div.col-xl-8.noselect
			- var sizeArray = new Array(parseInt(size) || 1)
			- var colClass = "col-" +  (size == 5 ? "fifth" : "third")

			div#temp_board_div
				div.bingo_behind
					each val, i in sizeArray
						div.row.margin_zero
							each val, j in sizeArray
								div(class=colClass)
									div.bingo_table_cell
										div.bingo_table_inner_cell

				div
					each val, i in sizeArray
						div.row.margin_zero
							div.col
								div.fake_bingo_cell
									if i == (size - 1) / 2
										div#fake_center
											button#start.btn.btn-lg.btn-block(style="margin: auto") Start
											h2#starting(style="display: none") Starting...

				div.float-right
					a#popout(onclick="popoutBoard()", style="color: var(--blue); cursor: pointer") Popout

			div#board_div


	div
		include how.pug
